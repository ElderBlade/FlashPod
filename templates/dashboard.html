<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- For iOS home screen icons -->
    <link rel="apple-touch-icon" href="/static/manifest/icon-180x180.png" sizes="180x180">
    <link rel="apple-touch-icon" href="/static/manifest/icon-152x152.png" sizes="152x152">

    <!-- For Android and others -->
    <link rel="manifest" href="/static/manifest/manifest.json">

    <script>
        (function() {
            // Check saved theme immediately
            const savedTheme = localStorage.getItem('flashpod_dark_mode');
            
            if (savedTheme === 'dark') {
                // Apply dark mode immediately before page renders
                document.documentElement.classList.add('dark');
            } else if (savedTheme === 'light') {
                // Ensure light mode
                document.documentElement.classList.remove('dark');
            } else {
                // No saved preference - default to light mode
                // (Don't follow system preference to avoid flash)
                document.documentElement.classList.remove('dark');
            }
        })();
    </script>

    <script type="importmap">
        {
            "imports": {
                "marked": "/static/vendor/marked/lib/marked.esm.js"
            }
        }
    </script>
    
    <title>FlashPod</title>
    <link href="/static/css/style.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="/static/img/flashpod-logo-icon.png">
</head>
<body class="bg-gray-50 dark:bg-gray-900 min-h-screen transition-colors duration-300">
    <!-- Mobile Overlay -->
    <div id="overlay" class="overlay"></div>
    
    <div class="flex h-screen">
        <!-- Sidebar Navigation -->
        <div id="sidebar" class="sidebar bg-white dark:bg-gray-800 w-64 shadow-lg flex flex-col transition-colors duration-300">
            <!-- App Header -->
            <div class="px-6 py-3">
                <img id="sidebar-logo" 
                    src="/static/img/flashpod-logo-main.png" 
                    class="mx-auto max-h-24 w-auto block transition-all duration-300" 
                    alt="FlashPod">
            </div>

            <!-- User Info -->
            <div class="px-6 py-4 border-gray-200 bg-gray-50 dark:border-gray-400 dark:bg-gray-700 transition-colors duration-300">
                <div class="flex items-center">
                    <div class="w-10 h-10 blue-gradient-bg rounded-full flex items-center justify-center">
                        <span id="userInitials" class="text-white font-semibold text-sm"></span>
                    </div>
                    <div class="ml-3">
                        <p id="userGreeting" class="text-sm font-medium text-gray-900 dark:text-white"></p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">Premium User</p>
                    </div>
                </div>
            </div>

            <!-- Navigation Menu -->
            <nav class="flex-1 px-4 py-6">
                <ul class="space-y-2">
                    <li>
                        <a href="#" id="nav-home" class="nav-item active flex items-center px-4 py-3 text-sm font-medium rounded-lg">
                            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v6H8V5z"></path>
                            </svg>
                            Dashboard
                        </a>
                    </li>
                    <li>
                        <a href="#" id="nav-library" class="nav-item flex items-center px-4 py-3 text-sm font-medium rounded-lg">
                            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                            </svg>
                            Library
                        </a>
                    </li>
                    <li>
                        <a href="#" id="nav-flashcards" class="nav-item flex items-center px-4 py-3 text-sm font-medium rounded-lg">
                            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            Flash Cards
                        </a>
                    </li>
                    <li>
                        <a href="#" id="nav-new-deck" class="nav-item flex items-center px-4 py-3 text-sm font-medium rounded-lg">
                            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            New Deck
                        </a>
                    </li>
                    <li>
                        <a href="#" id="nav-import" class="nav-item flex items-center px-4 py-3 text-sm font-medium rounded-lg">
                            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path>
                            </svg>
                            Import
                        </a>
                    </li>
                </ul>
            </nav>

            <!-- Version Info Footer -->
            <div class="px-4 py-2 border-t border-gray-200 bg-gray-50 dark:border-gray-700">
                <div class="flex items-center justify-between text-xs text-gray-500 dark:text-gray-700">
                    <span id="appVersion">FlashPod v{{version}}</span>
                    <a href="https://github.com/Elderblade/FlashPod" target="_blank" class="hover:text-gray-700 dark:hover:text-white transition-colors">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                    </a>
                </div>
            </div> 

            <!-- Logout Button -->
            <div class="px-4 py-4 border-t border-gray-200 dark:border-gray-700">
                <button id="logoutBtn" class="w-full flex items-center px-4 py-2 text-sm font-medium text-red-600 rounded-lg hover:bg-red-50 transition-colors cursor-pointer dark:text-red-400 dark:hover:text-red-500">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                    </svg>
                    Logout
                </button>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content flex-1 flex flex-col overflow-hidden">
            <!-- Mobile Header (visible only on mobile) -->
            <div class="mobile-header md:hidden flex items-center justify-between p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 transition-colors duration-300">
                <button id="hamburger" class="hamburger" aria-label="Toggle navigation menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <h2 class="text-lg font-bold text-gray-900 dark:text-white">FlashPod</h2>
                
                <!-- Dark Mode Toggle for Mobile -->
                <div class="relative">
                    <input type="checkbox" class="absolute left-[-999em]" id="mobile-dark-mode-toggle"/>
                    <label for="mobile-dark-mode-toggle" class="toggle dark-toggle cursor-pointer inline-block relative w-[60px] h-[34px] bg-sky-300 rounded-[56px] transition-all duration-200 ease-[cubic-bezier(0.445,0.05,0.55,0.95)]">
                        <!-- Sun/Moon Handler -->
                        <span class="toggle__handler inline-block relative z-10 top-[2px] left-[2px] w-[30px] h-[30px] bg-orange-200 rounded-full shadow-lg transition-all duration-400 ease-[cubic-bezier(0.68,-0.55,0.265,1.55)] transform -rotate-45">
                            <!-- Moon Craters -->
                            <span class="crater crater--1 absolute top-[12px] left-[7px] w-[3px] h-[3px] bg-orange-100 opacity-0 transition-opacity duration-200 ease-in-out rounded-full"></span>
                            <span class="crater crater--2 absolute top-[19px] left-[15px] w-[4px] h-[4px] bg-orange-100 opacity-0 transition-opacity duration-200 ease-in-out rounded-full"></span>
                            <span class="crater crater--3 absolute top-[7px] left-[17px] w-[5px] h-[5px] bg-orange-100 opacity-0 transition-opacity duration-200 ease-in-out rounded-full"></span>
                        </span>
                        <!-- Stars -->
                        <span class="star star--1 absolute top-[7px] left-[24px] z-0 w-[20px] h-[2px] bg-white transition-all duration-300 ease-[cubic-bezier(0.445,0.05,0.55,0.95)] rounded-full"></span>
                        <span class="star star--2 absolute top-[12px] left-[19px] z-10 w-[20px] h-[2px] bg-white transition-all duration-300 ease-[cubic-bezier(0.445,0.05,0.55,0.95)] rounded-full"></span>
                        <span class="star star--3 absolute top-[18px] left-[27px] z-0 w-[20px] h-[2px] bg-white transition-all duration-300 ease-[cubic-bezier(0.445,0.05,0.55,0.95)] rounded-full"></span>
                        <span class="star star--4 absolute top-[11px] left-[7px] z-0 w-[1px] h-[1px] bg-white opacity-0 transition-all duration-300 ease-[cubic-bezier(0.445,0.05,0.55,0.95)] rounded-full transform translate-x-[2px]"></span>
                        <span class="star star--5 absolute top-[22px] left-[11px] z-0 w-[2px] h-[2px] bg-white opacity-0 transition-all duration-300 ease-[cubic-bezier(0.445,0.05,0.55,0.95)] rounded-full transform translate-x-[2px]"></span>
                        <span class="star star--6 absolute top-[24px] left-[19px] z-0 w-[1px] h-[1px] bg-white opacity-0 transition-all duration-300 ease-[cubic-bezier(0.445,0.05,0.55,0.95)] rounded-full transform translate-x-[2px]"></span>
                    </label>
                </div>
            </div>

            <!-- Desktop Header -->
            <header class="hidden md:block bg-white dark:bg-gray-800 shadow-sm px-6 py-4 transition-colors duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 id="page-title" class="text-2xl font-bold text-gray-900 dark:text-white">Dashboard</h2>
                        <p id="page-subtitle" class="text-sm text-gray-500 dark:text-gray-400 mt-1">Welcome back! Here's your learning progress.</p>
                    </div>
                    
                    <!-- Dark Mode Toggle - Moved to right side -->
                    <div class="relative">
                        <input type="checkbox" class="absolute left-[-999em]" id="dark-mode-toggle"/>
                        <label for="dark-mode-toggle" class="toggle dark-toggle cursor-pointer inline-block relative w-[60px] h-[34px] bg-sky-300 rounded-[56px] transition-all duration-200 ease-[cubic-bezier(0.445,0.05,0.55,0.95)]">
                            <!-- Sun/Moon Handler -->
                            <span class="toggle__handler inline-block relative z-10 top-[2px] left-[2px] w-[30px] h-[30px] bg-orange-200 rounded-full shadow-lg transition-all duration-400 ease-[cubic-bezier(0.68,-0.55,0.265,1.55)] transform -rotate-45">
                                <!-- Moon Craters -->
                                <span class="crater crater--1 absolute top-[12px] left-[7px] w-[3px] h-[3px] bg-orange-100 opacity-0 transition-opacity duration-200 ease-in-out rounded-full"></span>
                                <span class="crater crater--2 absolute top-[19px] left-[15px] w-[4px] h-[4px] bg-orange-100 opacity-0 transition-opacity duration-200 ease-in-out rounded-full"></span>
                                <span class="crater crater--3 absolute top-[7px] left-[17px] w-[5px] h-[5px] bg-orange-100 opacity-0 transition-opacity duration-200 ease-in-out rounded-full"></span>
                            </span>
                            <!-- Stars -->
                            <span class="star star--1 absolute top-[7px] left-[24px] z-0 w-[20px] h-[2px] bg-white transition-all duration-300 ease-[cubic-bezier(0.445,0.05,0.55,0.95)] rounded-full"></span>
                            <span class="star star--2 absolute top-[12px] left-[19px] z-10 w-[20px] h-[2px] bg-white transition-all duration-300 ease-[cubic-bezier(0.445,0.05,0.55,0.95)] rounded-full"></span>
                            <span class="star star--3 absolute top-[18px] left-[27px] z-0 w-[20px] h-[2px] bg-white transition-all duration-300 ease-[cubic-bezier(0.445,0.05,0.55,0.95)] rounded-full"></span>
                            <span class="star star--4 absolute top-[11px] left-[7px] z-0 w-[1px] h-[1px] bg-white opacity-0 transition-all duration-300 ease-[cubic-bezier(0.445,0.05,0.55,0.95)] rounded-full transform translate-x-[2px]"></span>
                            <span class="star star--5 absolute top-[22px] left-[11px] z-0 w-[2px] h-[2px] bg-white opacity-0 transition-all duration-300 ease-[cubic-bezier(0.445,0.05,0.55,0.95)] rounded-full transform translate-x-[2px]"></span>
                            <span class="star star--6 absolute top-[24px] left-[19px] z-0 w-[1px] h-[1px] bg-white opacity-0 transition-all duration-300 ease-[cubic-bezier(0.445,0.05,0.55,0.95)] rounded-full transform translate-x-[2px]"></span>
                            
                        </label>
                    </div>
                </div>
            </header>

            <div class="hidden md:block h-px bg-gray-200 dark:bg-gray-700"></div>

            <!-- Mobile Page Title -->
            <div class="mobile-page-header md:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 transition-colors duration-300">
                <h2 id="mobile-page-title" class="mobile-page-title text-gray-900 dark:text-white">Dashboard</h2>
                <p id="mobile-page-subtitle" class="mobile-page-subtitle text-gray-500 dark:text-gray-400">Welcome back!</p>
            </div>

            <!-- Main Content -->
            <main class="flex-1 overflow-y-auto">
                <!-- Dashboard View -->
                <div id="dashboard-view" class="page-view p-4 md:p-6">
                    <!-- Stats Grid -->
                    <div class="stats-grid-mobile grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6 mb-6 md:mb-8">
                        <!-- Cards Learned -->
                        <div class="stats-card-mobile bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 md:p-6 border border-gray-100 dark:border-gray-700 transition-colors duration-300">
                            <div class="flex items-center">
                                <div class="p-2 bg-green-100 dark:bg-green-900 rounded-lg">
                                    <svg class="stats-icon w-4 h-4 md:w-6 md:h-6 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                </div>
                                <div class="stats-text ml-3 md:ml-4">
                                    <p class="stats-label text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400">Learned</p>
                                    <p id="cards-learned" class="stats-value text-lg md:text-2xl font-bold text-gray-900 dark:text-white">--</p>
                                </div>
                            </div>
                        </div>

                        <!-- Retention -->
                        <div class="stats-card-mobile bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 md:p-6 border border-gray-100 dark:border-gray-700 transition-colors duration-300">
                            <div class="flex items-center">
                                <div class="p-2 bg-blue-100 dark:bg-blue-900 rounded-lg">
                                    <svg class="stats-icon w-4 h-4 md:w-6 md:h-6 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                                    </svg>
                                </div>
                                <div class="stats-text ml-3 md:ml-4">
                                    <p class="stats-label text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400">Retention</p>
                                    <p id="retention-rate" class="stats-value text-lg md:text-2xl font-bold text-gray-900 dark:text-white">--</p>
                                </div>
                            </div>
                        </div>

                        <!-- Sessions -->
                        <div class="stats-card-mobile bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 md:p-6 border border-gray-100 dark:border-gray-700 transition-colors duration-300">
                            <div class="flex items-center">
                                <div class="p-2 bg-purple-100 dark:bg-purple-900 rounded-lg">
                                    <svg class="stats-icon w-4 h-4 md:w-6 md:h-6 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                                    </svg>
                                </div>
                                <div class="stats-text ml-3 md:ml-4">
                                    <p class="stats-label text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400">Reviews</p>
                                    <p id="total-sessions" class="stats-value text-lg md:text-2xl font-bold text-gray-900 dark:text-white">--</p>
                                </div>
                            </div>
                        </div>

                        <!-- Time -->
                        <div class="stats-card-mobile bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 md:p-6 border border-gray-100 dark:border-gray-700 transition-colors duration-300">
                            <div class="flex items-center">
                                <div class="p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg">
                                    <svg class="stats-icon w-4 h-4 md:w-6 md:h-6 text-yellow-600 dark:text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                </div>
                                <div class="stats-text ml-3 md:ml-4">
                                    <p class="stats-label text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400">Time</p>
                                    <p id="study-time" class="stats-value text-lg md:text-2xl font-bold text-gray-900 dark:text-white">--</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recently Reviewed Decks -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 transition-colors duration-300">
                        <div class="px-4 md:px-6 py-4 border-b border-gray-100 dark:border-gray-700">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Recently Reviewed Decks</h3>
                                    <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Your most recently studied decks</p>
                                </div>
                                <a href="#" onclick="window.app.library.viewAllDecks(); return false;" class="text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium">
                                    View All
                                </a>
                            </div>
                        </div>
                        <div class="p-4 md:p-6">
                            <div id="recent-decks" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- Recent decks will be loaded here -->
                                <div class="text-center py-8 text-gray-500 dark:text-gray-400">
                                    <svg class="w-12 h-12 mx-auto mb-3 text-gray-300 dark:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                                    </svg>
                                    <p class="text-sm md:text-base">Loading recent decks...</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recently Used Pods -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 transition-colors duration-300 mt-6 md:mt-8">
                        <div class="px-4 md:px-6 py-4 border-b border-gray-100 dark:border-gray-700">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Recently Used Pods</h3>
                                    <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Your most recently studied pod collections</p>
                                </div>
                                <a href="#" onclick="window.app.plibrary.viewAllPods(); return false;" class="text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium">
                                    View All
                                </a>
                            </div>
                        </div>
                        <div class="p-4 md:p-6">
                            <div id="recent-pods" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- Recent pods will be loaded here -->
                                <div class="text-center py-8 text-gray-500 dark:text-gray-400">
                                    <svg class="w-12 h-12 mx-auto mb-3 text-gray-300 dark:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
                                    </svg>
                                    <p class="text-sm md:text-base">Loading recent pods...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Library View with Tabs -->
                <div id="library-view" class="page-view hidden">
                    <!-- Tab Navigation -->
                    <div class="mb-6 px-4">
                        <div class="inline-flex bg-gray-100 dark:bg-gray-800 rounded-xl p-1 relative">
                            <div class="tab-indicator absolute bg-white dark:bg-gray-700 rounded-lg shadow-sm transition-all duration-300 ease-out"></div>
                            <button 
                                id="decks-tab"
                                class="library-tab active relative z-10 px-6 py-3 font-medium text-sm transition-colors duration-200 rounded-lg"
                                data-tab="decks">
                                <span class="flex items-center space-x-2">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                                    </svg>
                                    <span>Decks</span>
                                </span>
                            </button>
                            <button 
                                id="pods-tab"
                                class="library-tab relative z-10 px-6 py-3 font-medium text-sm transition-colors duration-200 rounded-lg"
                                data-tab="pods">
                                <span class="flex items-center space-x-2">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
                                    </svg>
                                    <span>Pods</span>
                                </span>
                            </button>
                        </div>
                    </div>

                    <!-- Decks Tab Content (original deck library) -->
                    <div id="decks-tab-content" class="tab-content p-4">
                        <!-- Original Deck Library Content -->
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <button id="bulk-select-mode" class="text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white">
                                    Select Multiple
                                </button>
                                <select id="deck-sort" class="text-sm border border-gray-300 dark:border-gray-600 rounded-md px-2 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
                                    <option value="recent">Recently Modified</option>
                                    <option value="name">Name (A-Z)</option>
                                    <option value="cards">Card Count</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Bulk Actions Bar (hidden by default) -->
                        <div id="bulk-actions-bar" class="hidden mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg">
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-blue-800 dark:text-blue-300">
                                    <span id="selected-count">0</span> decks selected
                                </span>
                                <div class="flex items-center space-x-2">
                                    <button id="add-to-pod-bulk" class="px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700">
                                        Add to Pod
                                    </button>
                                    <button id="cancel-bulk-select" class="px-3 py-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-sm rounded hover:bg-gray-400 dark:hover:bg-gray-500">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Original Deck Grid -->
                        <div id="all-decks-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <!-- Decks will be loaded here by existing deck-library.js -->
                        </div>
                    </div>

                    <!-- Pods Tab Content -->
                    <div id="pods-tab-content" class="tab-content hidden p-4">
                        <!-- Create New Pod Button -->
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center space-x-3">
                                <button 
                                    id="create-pod-btn"
                                    style="display: none;"
                                    class="orange-gradient inline-flex items-center px-4 py-2 text-white font-medium rounded-lg transition-all">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                    </svg>
                                    Create New Pod
                                </button>
                                <select id="pod-sort" class="text-sm border border-gray-300 dark:border-gray-600 rounded-md px-2 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
                                    <option value="recent">Recently Modified</option>
                                    <option value="name">Name (A-Z)</option>
                                    <option value="decks">Deck Count</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Pods Grid -->
                        <div id="all-pods-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <!-- Pods will be loaded here -->
                        </div>

                        <!-- Empty State -->
                        <div id="pods-empty-state" class="hidden text-center py-12">
                            <svg class="w-16 h-16 mx-auto text-gray-400 dark:text-gray-500 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                            </svg>
                            <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">No pods yet</h3>
                            <p class="text-gray-500 dark:text-gray-400 mb-6">Create your first pod to organize your decks into collections.</p>
                            <button 
                                id="create-first-pod-btn"
                                class="orange-gradient inline-flex items-center px-4 py-2 text-white font-medium rounded-lg transition-all">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                </svg>
                                Create Your First Pod
                            </button>
                        </div>
                    </div>
                </div> <!-- Library View End -->

                <div id="flashcards-view" class="page-view hidden p-4 md:p-6 dark:text-white">
                    <p>Flash card study interface</p>
                </div>

                <div id="new-deck-view" class="page-view hidden p-4 md:p-6">
                    
                    <!-- New Deck Form -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700">
                        <form id="deckForm" class="space-y-6">
                            <!-- Deck Info Section -->
                            <div class="">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2 dark:text-gray-300">Deck Name</label>
                                    <input type="text" id="deckName" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2 mt-2 dark:text-gray-300">Description</label>
                                    <textarea id="deckDescription" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400" rows="3"></textarea>
                                </div>
                            </div>

                            <!-- Import Section -->
                            <div class="border-t pt-3">
                                <div class="block mb-4">
                                    <button type="button" id="importCardsBtn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-300 px-4 py-2 my-2 rounded-md font-medium transition-colors flex items-center">
                                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path>
                                        </svg>
                                        Import Cards
                                    </button>
                                    <h3 class="text-lg font-medium text-gray-900 dark:text-white">Flashcards</h3>
                                    
                                </div>

                                <!-- Cards Container -->
                                <div id="cardsContainer" class="space-y-3 border border-gray-200 rounded-lg p-4 dark:border-gray-600">
                                    <!-- Card rows will be added here -->
                                </div>

                                <!-- Add Card Button -->
                                <button type="button" id="addCardBtn" class="w-full border-2 border-dashed border-gray-300 rounded-lg px-4 py-3 text-gray-500 hover:border-gray-400 hover:text-gray-600 transition-colors flex items-center justify-center dark:border-gray-600 dark:text-gray-400 dark:hover:border-gray-500 dark:hover:text-gray-300 cursor-pointer">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                    </svg>
                                    Add Another Card
                                </button>
                            </div>

                            <!-- Form Actions -->
                            <div class="flex gap-4 pt-6 border-t dark:border-gray-700">
                                <button type="submit" class="blue-gradient text-white px-6 py-3 rounded-lg font-medium transition-all">
                                    Create Deck
                                </button>
                                <button type="button" id="cancelDeck" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors dark:bg-gray-600 dark:hover:bg-gray-700">
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Import Section -->
                <div id="import-view" class="page-view hidden p-4 md:p-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700">
                        <div class="mb-6">
                            <h2 class="text-xl font-semibold text-gray-900 mb-2 dark:text-white">Import Flashcards</h2>
                            <p class="text-sm text-gray-600 mb-4 dark:text-gray-300">
                                Paste your flashcard data below. Each line should contain a term and definition separated by a tab or comma.
                            </p>
                            
                            <!-- Format Examples -->
                            <div class="bg-gray-50 rounded-lg p-4 mb-4 dark:bg-gray-900 dark:border-gray-700">
                                <h3 class="text-sm font-medium text-gray-700 mb-2 dark:text-white">Supported Formats:</h3>
                                <div class="text-xs text-gray-600 space-y-1 font-mono dark:text-gray-300">
                                    <div>• Tab-separated: <span class="px-1 rounded ">Word 1&nbsp;&nbsp;&nbsp;&nbsp;Definition 1</span></div>
                                    <div>• Comma-separated: <span class="px-1 rounded">Word 1, Definition 1</span></div>
                                </div>
                            </div>
                        </div>

                        <div class="space-y-4">
                            <div class="mb-6"> <!-- Upload File -->
                                <label class="block text-sm font-medium text-gray-700 mb-2 dark:text-white">
                                    Upload File
                                </label>
                                <div class="flex items-center justify-center w-full">
                                    <label for="fileUpload" class="flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 dark:bg-gray-700 dark:border-gray-600 dark:hover:bg-gray-600">
                                        <div class="flex flex-col items-center justify-center pt-5 pb-6">
                                            <svg class="w-8 h-8 mb-2 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                            </svg>
                                            <p class="mb-2 text-sm text-gray-500"><span class="font-semibold">Click to upload</span> CSV file</p>
                                            <p class="text-xs text-gray-500">CSV, TSV files supported</p>
                                        </div>
                                        <input id="fileUpload" type="file" class="hidden" accept=".csv,.tsv,.txt" />
                                    </label>
                                </div>
                            </div>
                            <!-- Add "OR" divider -->
                            <div class="relative mb-4">
                                <div class="absolute inset-0 flex items-center">
                                    <div class="w-full border-t border-gray-300"></div>
                                </div>
                                <div class="relative flex justify-center text-sm">
                                    <span class="px-2 bg-white text-gray-500 dark:bg-gray-800">OR paste data below</span>
                                </div>
                            </div>
                            <div> <!-- Import Data Field -->
                                <label for="importDataField" class="block text-sm font-medium text-gray-700 mb-2 dark:text-white">
                                    Flashcard Data
                                </label>
                                <textarea 
                                    id="importDataField" 
                                    placeholder="Word 1&#9;Definition 1&#10;Word 2&#9;Definition 2&#10;Word 3&#9;Definition 3"
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder:text-gray-400 placeholder:italic" 
                                    rows="8"
                                    style="font-family: 'Courier New', monospace;"
                                ></textarea>
                                <p class="mt-1 text-xs text-gray-500">
                                    Use Tab or comma to separate terms from definitions. Each line is one flashcard.
                                </p>
                            </div>

                            <!-- Action Buttons -->
                            <div class="flex gap-4 pt-4 border-t dark:border-gray-700">
                                <button 
                                    id="parseImportBtn" 
                                    class="blue-gradient text-white px-4 py-2 rounded-lg font-medium transition-all"
                                >
                                    Parse Cards
                                </button>
                                <button 
                                    id="clearImportBtn" 
                                    class="bg-red-100 hover:bg-red-200 text-red-700 px-4 py-2 rounded-lg font-medium transition-colors"
                                >
                                    Clear All
                                </button>
                            </div>

                            <!-- Parsed Cards Section -->
                            <div id="importCardsSection" class="hidden">
                                <div class="border-t pt-6 dark:border-gray-700">
                                    <div class="flex justify-between items-center mb-4">
                                        <h3 class="text-lg font-medium text-gray-900 dark:text-gray-300">
                                            Parsed Cards (<span id="cardCount">0</span>)
                                        </h3>
                                        <button 
                                            id="importToDeckBtn" 
                                            class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors"
                                        >
                                            Create Deck with These Cards
                                        </button>
                                    </div>
                                    
                                    <!-- Cards Container -->
                                    <div id="importCardsContainer" class="space-y-3 border border-gray-200 rounded-lg p-4">
                                        <!-- Parsed cards will be inserted here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> <!-- End Import Section-->

                <!-- Edit Section-->
                <div id="edit-deck-view" class="page-view hidden p-4 md:p-6">
                    <!-- Edit Deck Form -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-xl font-semibold text-gray-900 dark:text-white">Edit Deck</h3>
                            <button id="cancelEdit" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>

                        <form id="editDeckForm" class="space-y-6">
                            <input type="hidden" id="editDeckId" value="">
                            
                            <!-- Deck Info Section -->
                            <div class="">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2 dark:text-gray-300">Deck Name</label>
                                    <input type="text" id="editDeckName" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2 mt-2 dark:text-gray-300">Description</label>
                                    <textarea id="editDeckDescription" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400" rows="3"></textarea>
                                </div>
                            </div>

                            <!-- Cards Section -->
                            <div class="mb-4">
                                <h3 class="text-lg font-medium text-gray-900 dark:text-white">Flashcards</h3>
                            </div>

                                <!-- Cards Container for Edit -->
                                <div id="editCardsContainer" class="space-y-3 mb-4">
                                    <!-- Existing cards will be loaded here -->
                                    <div class="text-center py-8 text-gray-500">
                                        <p>Loading cards...</p>
                                    </div>
                                </div>

                                <!-- Add Card Button -->
                                <button type="button" id="addCardToEdit" class="w-full border-2 border-dashed border-gray-300 rounded-lg px-4 py-3 text-gray-500 hover:border-gray-400 hover:text-gray-600 transition-colors flex items-center justify-center dark:border-gray-600 dark:text-gray-400 dark:hover:border-gray-500 dark:hover:text-gray-300 cursor-pointer">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                    </svg>
                                    Add Another Card
                                </button>
                            </div>

                            <!-- Form Actions -->
                            <div class="flex gap-4 pt-6 border-t dark:border-gray-700">
                                <button type="submit" class="blue-gradient text-white px-6 py-3 rounded-lg font-medium transition-all">
                                    Save Changes
                                </button>
                                <button type="button" id="cancelEditDeck" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors dark:bg-gray-600 dark:hover:bg-gray-700">
                                    Cancel
                                </button>
                                <button type="button" id="deleteDeck" class="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-medium transition-colors ml-auto dark:bg-red-600 dark:hover:bg-red-700">
                                    Delete Deck
                                </button>
                            </div>
                        </form>
                    </div>
                </div> <!-- Edit Section End--> 
            </main>
        </div>
    </div>

    <!-- Messages -->
    <div id="messages" class="fixed top-4 right-4 z-50"></div>

    <script type="module" src="/static/js/app.js"></script>
    <script type="module" src="/static/js/study.js"></script>
    <script>
        (function() {
            // Temporarily disable transitions
            document.documentElement.classList.add('no-transitions');
            
            // Check saved theme immediately
            const savedTheme = localStorage.getItem('flashpod_dark_mode');
            
            if (savedTheme === 'dark') {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
            
            // Re-enable transitions after a brief delay
            setTimeout(() => {
                document.documentElement.classList.remove('no-transitions');
            }, 100);
        })();
    </script>
</body>
</html>